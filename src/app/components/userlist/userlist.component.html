<div class="section">
    <div *ngIf="!userDataLoaded()" class="loader">
        <mat-spinner></mat-spinner>
    </div>
    <mat-accordion *ngIf="userDataLoaded()">
        @for (user of users; track user.userid) {
            <mat-expansion-panel (opened)="plotVehiclesOnMap(user)">
                <mat-expansion-panel-header>
                    <mat-panel-title> {{ user.owner.name + user.owner.surname + getVehicleCount(user) }} </mat-panel-title>
                    <mat-panel-description></mat-panel-description>
                </mat-expansion-panel-header>
                <mat-action-list>
                    @for (vehicle of user.vehicles; track vehicle.vehicleid) {
                        <button mat-list-item (click)="selectVehicle(vehicle.vehicleid)">{{ getVehicleDescription(vehicle) }}</button>
                    }
                </mat-action-list>
            </mat-expansion-panel>
        }
    </mat-accordion>
</div> 